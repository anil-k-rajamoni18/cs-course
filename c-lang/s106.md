# Structures and Unions

## ğŸ—ï¸ 1. Introduction

In C, structures and unions are user-defined data types that allow you to store different data types under one name.

They are useful for grouping related data â€” for example, a student's name, roll number, and marks â€” into a single record.

---

## ğŸ”¹ 2. Structures in C

### ğŸ‘‰ Definition

A structure is a collection of variables (called members) of different data types, grouped together under a single name.

### ğŸ§© Syntax:
```c
struct structure_name {
    data_type member1;
    data_type member2;
    ...
};
```

### ğŸ§  Example:
```c
#include <stdio.h>

struct Student {
    int roll;
    char name[30];
    float marks;
};

int main() {
    struct Student s1 = {1, "Alice", 88.5};

    printf("Roll: %d\n", s1.roll);
    printf("Name: %s\n", s1.name);
    printf("Marks: %.2f\n", s1.marks);
    return 0;
}
```

**Output:**
```
Roll: 1
Name: Alice
Marks: 88.50
```

---

## ğŸ”¹ 3. Declaring Structure Variables

### âœ… 3 Ways to Declare:
```c
// 1. Separate variable declaration
struct Student {
    int roll;
    char name[30];
    float marks;
};
struct Student s1, s2;

// 2. Declare variable along with structure
struct Student {
    int roll;
    char name[30];
    float marks;
} s1, s2;

// 3. Using typedef (alias)
typedef struct {
    int roll;
    char name[30];
    float marks;
} Student;

Student s1, s2;
```

---

## ğŸ”¹ 4. Accessing Structure Members

Use the dot operator ( `.` ) with structure variables:
```c
s1.roll = 5;
strcpy(s1.name, "John");
s1.marks = 92.5;
```

To display:
```c
printf("%d %s %.2f", s1.roll, s1.name, s1.marks);
```

---

## ğŸ”¹ 5. Array of Structures

Used when you have multiple records of the same type.

### Example:
```c
struct Student {
    int roll;
    char name[30];
    float marks;
};

int main() {
    struct Student s[3];
    for(int i = 0; i < 3; i++) {
        printf("Enter roll, name, marks: ");
        scanf("%d %s %f", &s[i].roll, s[i].name, &s[i].marks);
    }

    printf("\nStudent Details:\n");
    for(int i = 0; i < 3; i++) {
        printf("%d %s %.2f\n", s[i].roll, s[i].name, s[i].marks);
    }
}
```

---

## ğŸ”¹ 6. Structure with Functions

You can pass structures to functions by value or by reference (pointer).

### Example: Pass by Value
```c
void display(struct Student s) {
    printf("%d %s %.2f\n", s.roll, s.name, s.marks);
}
```

### Example: Pass by Reference
```c
void display(struct Student *s) {
    printf("%d %s %.2f\n", s->roll, s->name, s->marks);
}
```

**Note:** `->` (arrow operator) is used with pointers to access structure members.

---

## ğŸ”¹ 7. Nested Structures

A structure inside another structure.
```c
struct Address {
    char city[20];
    int pin;
};

struct Student {
    int roll;
    char name[30];
    struct Address addr;
};

int main() {
    struct Student s = {1, "Alex", {"Delhi", 110001}};
    printf("%s - %d", s.addr.city, s.addr.pin);
}
```

---

## ğŸ”¹ 8. Pointer to Structure
```c
struct Student s1 = {1, "John", 89.0};
struct Student *ptr = &s1;

printf("%d %s %.2f", ptr->roll, ptr->name, ptr->marks);
```

---

## ğŸ”¹ 9. Structure within Structure Example (Real Case)
```c
struct Date {
    int day, month, year;
};

struct Employee {
    int id;
    char name[30];
    struct Date dob;
};

int main() {
    struct Employee e1 = {101, "Ravi", {12, 8, 1998}};
    printf("Employee: %s, DOB: %d-%d-%d",
           e1.name, e1.dob.day, e1.dob.month, e1.dob.year);
}
```

---

## ğŸ§± 10. Unions in C

### ğŸ‘‰ Definition

A union is similar to a structure, but all its members share the same memory location.
This means only one member can hold a value at a time.

### ğŸ§© Syntax:
```c
union union_name {
    data_type member1;
    data_type member2;
    ...
};
```

### ğŸ§  Example:
```c
#include <stdio.h>

union Data {
    int i;
    float f;
    char str[20];
};

int main() {
    union Data d;

    d.i = 10;
    printf("d.i = %d\n", d.i);

    d.f = 220.5;
    printf("d.f = %.2f\n", d.f);

    strcpy(d.str, "Hello");
    printf("d.str = %s\n", d.str);

    return 0;
}
```

**Output (Note how earlier values are overwritten):**
```
d.i = 10
d.f = 220.50
d.str = Hello
```

---

## ğŸ”¹ 11. Memory Allocation Difference

| Type | Behavior | Example | Memory |
|------|----------|---------|--------|
| Structure | All members have separate memory | `struct Student` | Sum of all members |
| Union | All members share same memory | `union Data` | Memory of largest member |

### Example:
```c
struct Test {
    int i;     // 4 bytes
    float f;   // 4 bytes
    char str[20]; // 20 bytes
}; // Total = 28 bytes

union Test {
    int i;
    float f;
    char str[20];
}; // Total = 20 bytes (max member)
```

---

## ğŸ”¹ 12. Accessing Union Members

Same as structures â€” using the dot operator.
```c
union Data d;
d.i = 10;
printf("%d", d.i);
```

---

## ğŸ”¹ 13. Using typedef with Structures and Unions
```c
typedef struct {
    int x, y;
} Point;

typedef union {
    int i;
    float f;
} Number;

int main() {
    Point p = {10, 20};
    Number n;
    n.f = 5.5;
    printf("(%d, %d), %.1f", p.x, p.y, n.f);
}
```

---

## ğŸ†š 14. Difference Between Structure and Union

| Feature | Structure | Union |
|---------|-----------|-------|
| Memory | Separate memory for each member | Shared memory among all members |
| Storage | All members exist simultaneously | Only one member can be active |
| Size | Sum of all members | Size of the largest member |
| Initialization | Multiple members can be initialized | Only one at a time |
| Use case | Complex records | Memory-efficient data storage |

---

## ğŸ§© 15. Example Comparing Structure vs Union
```c
#include <stdio.h>

struct S {
    int i;
    char c;
    float f;
};

union U {
    int i;
    char c;
    float f;
};

int main() {
    struct S s = {10, 'A', 3.5};
    union U u;

    u.i = 10;
    u.c = 'A';
    u.f = 3.5;

    printf("Structure: %d %c %.2f\n", s.i, s.c, s.f);
    printf("Union: %d %c %.2f\n", u.i, u.c, u.f);
    return 0;
}
```

**Output:**
```
Structure: 10 A 3.50
Union: Garbage Garbage 3.50
```

**ğŸ§  Explanation:** Union overwrites previous values.

---

## ğŸ“˜ 16. Common Interview/Exam Questions

1. What is the difference between structure and union?
2. How is memory allocated for a structure vs a union?
3. Can you nest a structure inside another structure?
4. Can a structure contain a pointer to itself? (Yes, for linked lists.)
5. Why use unions? (For saving memory or handling different data formats.)
6. What is the use of the arrow (`->`) operator?
7. Can you pass a structure/union to a function? (Yes, by value or reference.)

---

## ğŸ§¾ 17. Real-Life Applications

| Use Case | Example |
|----------|---------|
| Structure | Student records, Employee details, Bank accounts |
| Union | Memory optimization, Hardware registers, Variant data (like JSON or sensor readings) |

---

## âœ… Summary

| Concept | Key Points |
|---------|------------|
| Structure | Stores different data types together, each with its own memory. |
| Union | Stores different data types in the same memory location. |
| Access | Use dot (`.`) or arrow (`->`) operator. |
| Memory | Structure = sum of members, Union = largest member. |
| Usage | Structure â†’ detailed record; Union â†’ memory efficiency. |